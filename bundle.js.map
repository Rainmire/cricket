{"version":3,"sources":["webpack:///webpack/bootstrap f36e5986bcdedf365fb6","webpack:///./game.js","webpack:///./map.js","webpack:///./drawcanvas.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qGAAqG;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;;AAEA,CAAC;;;;;;;;;AC7CD;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6CAA6C,OAAO;AACpD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,cAAc,EAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,cAAc,EAAE;AAC/C,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,kBAAkB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAmB,sBAAsB;AACzC,qBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACjSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB,gBAAgB;AACnD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f36e5986bcdedf365fb6","import Map from './map';\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n  var map;\n  const reset = document.getElementById(\"reset-btn\");\n  const winModal = document.getElementById(\"gameover-modal\");\n  reset.onclick = () => {\n    map.clearAllCanvas();\n    map = new Map();\n    winModal.style.display = \"none\";\n  };\n  // debugger;\n\n\n  var cricketImg = new Image();\n\n  cricketImg.crossOrigin = \"Anonymous\";\n\n  cricketImg.src = 'http://res.cloudinary.com/rainmire/image/upload/v1516048742/canvas-cricket/circle.png';\n\n  cricketImg.onload = () => {\n    // debugger;\n    map = new Map(cricketImg);\n  };\n\n  // var img = new Image,\n  //   canvas = document.createElement(\"canvas\"),\n  //   ctx = canvas.getContext(\"2d\"),\n  //   src = \"http://res.cloudinary.com/rainmire/image/upload/v1516048742/canvas-cricket/circle.png\"; // insert image url here\n  //\n  // img.crossOrigin = \"Anonymous\";\n  //\n  // img.onload = function() {\n  //     canvas.width = img.width;\n  //     canvas.height = img.height;\n  //     ctx.drawImage( img, 0, 0 );\n  //     localStorage.setItem( \"savedImageData\", canvas.toDataURL(\"image/png\") );\n  //     map = new Map(img);\n  // };\n  // img.src = src;\n  // // make sure the load event fires for cached images too\n  // if ( img.complete || img.complete === undefined ) {\n  //     img.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";\n  //     img.src = src;\n  // }\n\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./game.js\n// module id = 0\n// module chunks = 0","import DrawCanvas from './drawcanvas';\n\nclass Map {\n\n  constructor(cricketImg){\n    // var canvas = document.getElementById('terrainCanvas');\n    // var context = canvas.getContext('2d');\n\n    // this.imageX = 0;\n    // this.imageY = -60;\n\n    this.speed = 6;\n    this.climb = 4;\n\n    // this.cricketX = 450;\n    // this.cricketY = 200;\n\n    this.cricketX = 100;\n    this.cricketY = 100;\n\n    this.cricketW = 50;\n    this.cricketH = 50;\n\n\n    document.onkeydown = this.keyDown.bind(this);\n\t\tdocument.onkeyup = this.keyUp.bind(this);\n\n    this.left_key = false;\n    this.right_key = false;\n    this.space_key = false;\n    this.jumping = false;\n\n    this.upForce = 0;\n\n    this.playing = true;\n\n    this.initTerrain();\n    this.initCricket(cricketImg);\n    // this.initGoal();\n    this.frame();\n  }\n\n  samplePixel(x, y) {\n    debugger;\n    // // PIXEL SAMPLING\n    // let x = 100;\n    // let y = 110;\n    let r = (y * this.cricketW + x) * 4;\n    let g = (y * this.cricketW + x) * 4 + 1;\n    let b = (y * this.cricketW + x) * 4 + 2;\n    let a = (y * this.cricketW + x) * 4 + 3;\n    console.log(this.cricketMap.data[r]);\n    console.log(this.cricketMap.data[g]);\n    console.log(this.cricketMap.data[b]);\n    console.log(this.cricketMap.data[a]);\n    // // PIXEL SAMPLING\n  }\n\n  clearAllCanvas() {\n    this.terrainContext.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n    this.cricketContext.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n  }\n\n  initTerrain() {\n    var terrainCanvas = document.getElementById('terrainCanvas');\n    this.terrainContext = terrainCanvas.getContext('2d');\n\n    this.canvasWidth = terrainCanvas.width;\n    this.canvasHeight = terrainCanvas.height;\n\n    this.terrainContext.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n    this.drawCanvas = new DrawCanvas();\n  }\n\n  initCricket (cricketImg) {\n    // debugger;\n    var cricketCanvas = document.getElementById('cricketCanvas');\n    this.cricketContext = cricketCanvas.getContext('2d');\n    this.cricketContext.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n    // this.cricketMap = this.cricketContext.createImageData(10,10);\n    // var cricketData = this.cricketMap.data;\n    // for(var i = 0, n = cricketData.length; i < n; i += 4) {\n    //   cricketData[i] = 255;\n    //   cricketData[i + 1] = 0;\n    //   cricketData[i + 2] = 0;\n    //   cricketData[i + 3] = 255;\n    // }\n\n    this.cricketContext.drawImage(cricketImg, this.cricketX, this.cricketY, this.cricketW, this.cricketH);\n\n    // this.cricketMap = this.cricketContext.getImageData(this.cricketX, this.cricketY, this.cricketW, this.cricketH);\n\n    // debugger;\n    // this.cricketContext.putImageData(this.cricketMap,this.cricketX,this.cricketY);\n  }\n\n  drawCricket() {\n    this.cricketContext.clearRect(0, 0, this.terrainMap.width, this.terrainMap.height);\n\n    this.cricketContext.putImageData(this.cricketMap,this.cricketX,this.cricketY);\n  }\n\n  frame() {\n    // if (!this.playing) {\n    //   return;\n    // }\n    this.terrainMap = this.terrainContext.getImageData(0, 0, this.canvasWidth, this.canvasHeight);\n    this.samplePixel(20, 20);\n    setTimeout(()=>{ this.frame(); }, 1000 / 60);\n    // // PIXEL SAMPLING\n    // let x = 100;\n    // let y = 110;\n    // let r = (y * this.canvasWidth + x) * 4;\n    // let g = (y * this.canvasWidth + x) * 4 + 1;\n    // let b = (y * this.canvasWidth + x) * 4 + 2;\n    // let a = (y * this.canvasWidth + x) * 4 + 3;\n    // console.log(this.terrainMap.data[r]);\n    // console.log(this.terrainMap.data[g]);\n    // console.log(this.terrainMap.data[b]);\n    // console.log(this.terrainMap.data[a]);\n    // // PIXEL SAMPLING\n\n    // if (this.moveCricket()) {\n    //   var that = this;\n    //   setTimeout(function(){ that.frame(); }, 1000 / 60);\n    // } else {\n    //   this.gameOver();\n    // }\n  }\n\n  gameOver() {\n    this.playing = false;\n    let modal = document.getElementById('gameover-modal');\n    modal.style.display = \"block\";\n  }\n\n  moveCricket() {\n\n    //stuck test\n    // if(this.collisionTest(this.cricketX+1, this.cricketY, this.cricketMap,this.terrainMap) &&\n    //   this.collisionTest(this.cricketX-1, this.cricketY, this.cricketMap,this.terrainMap) &&\n    //   this.collisionTest(this.cricketX, this.cricketY+1, this.cricketMap,this.terrainMap) &&\n    //   this.collisionTest(this.cricketX, this.cricketY-1, this.cricketMap,this.terrainMap)) {\n    //   return false;\n    // }\n\n    if (this.collisionTest(this.cricketX, this.cricketY, this.cricketMap,this.terrainMap)===2) {\n      return false;\n    }\n\n    if (this.left_key) {\n      for (let i=0; i < this.speed; i++) {\n        if (this.cricketX<3) {\n          break;\n        }\n        //hill climbing\n        let newX = this.cricketX - 1;\n  \t\t\tif(this.collisionTest(newX, this.cricketY, this.cricketMap,this.terrainMap)===1){\n          let newY = this.cricketY;\n  \t\t\t\tfor (let j=0; j < this.climb; j++){\n            newY-=1;\n            if (this.collisionTest(newX, newY, this.cricketMap,this.terrainMap)===0){\n              this.cricketX = newX;\n              this.cricketY = newY;\n              break;\n            }\n          }\n  \t\t\t}\n        else {\n          this.cricketX = newX;\n        }\n      }\n\t\t}\n    if (this.right_key) {\n      for (let i=0; i < this.speed; i++) {\n        if (this.cricketX+this.cricketMap.width>this.canvasWidth-1) {\n          break;\n        }\n        //hill climbing\n        let newX = this.cricketX + 1;\n  \t\t\tif(this.collisionTest(newX, this.cricketY, this.cricketMap,this.terrainMap)===1){\n          let newY = this.cricketY;\n  \t\t\t\tfor (let j=0; j < this.climb; j++){\n            newY-=1;\n            if (this.collisionTest(newX, newY, this.cricketMap,this.terrainMap)===0){\n              this.cricketX = newX;\n              this.cricketY = newY;\n              break;\n            }\n          }\n  \t\t\t}\n        else {\n          this.cricketX = newX;\n        }\n      }\n    }\n\n    if (this.space_key && !this.jumping) {\n      this.upForce = 4*this.speed;\n      this.jumping = true;\n    }\n\n    //jumping\n    if (this.upForce > 0) {\n      for (let i = 0; i < this.upForce; i++) {\n        let newY = this.cricketY - 1;\n        if(this.collisionTest(this.cricketX, newY, this.cricketMap, this.terrainMap)===0){\n    \t\t\tthis.cricketY = newY;\n    \t\t}\n        else{\n          this.upForce = 0;\n        }\n      }\n      this.upForce--;\n    }\n\n    //falling\n    for (let i=0; i < this.speed*2; i++) {\n      let newY = this.cricketY + 1;\n      if(this.collisionTest(this.cricketX, newY, this.cricketMap, this.terrainMap)===0){\n  \t\t\tthis.cricketY = newY;\n  \t\t}\n      else {\n        this.jumping = false;\n      }\n    }\n\n    this.drawCricket();\n    return true;\n  }\n\n  collisionTest(x, y ,smallerObj, biggerObj) {\n    for (let i = 0; i < smallerObj.width; i++) {\n      for (let j = 0; j < smallerObj.height; j++) {\n        let res = this.getPixel(i+x, j+y,biggerObj);\n        if (res!==0) {\n          return res;\n        }\n      }\n    }\n    return 0;\n  }\n\n  getPixel(x,y,map){\n    if(x < 0 || y < 0 || x > map.width || y > map.height) return;\n    let r = (y * map.width + x) * 4;\n\t\tlet g = (y * map.width + x) * 4 + 1;\n\t\tlet b = (y * map.width + x) * 4 + 2;\n\t\tlet a = (y * map.width + x) * 4 + 3;\n    if (map.data[r]===0 && map.data[g]===0 && map.data[b]===0 && map.data[a]===0) {\n      return 0;\n    }\n    if (map.data[r]===0 && map.data[g]===255 && map.data[b]===0 && map.data[a]===255) {\n      this.gameOver();\n      return 2;\n    }\n\n    return 1;\n  }\n\n  keyDown() {\n    let KeyID = event.keyCode;\n    if (KeyID === 37) {\n\t\t\t\tthis.left_key = true;\n\t\t}\n\t\tif (KeyID === 39) {\n\t\t\tthis.right_key = true;\n\t\t}\n    if (KeyID === 32) {\n\t\t\tthis.space_key = true;\n\t\t}\n  }\n\n  keyUp() {\n    var KeyID = event.keyCode;\n\t\tif (KeyID === 37) {\n\t\t\tthis.left_key = false;\n\t\t}\n\t\tif (KeyID === 39) {\n\t\t\tthis.right_key = false;\n\t\t}\n    if (KeyID === 32) {\n\t\t\tthis.space_key = false;\n\t\t}\n  }\n}\n\nexport default Map;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./map.js\n// module id = 1\n// module chunks = 0","class DrawCanvas {\n  constructor() {\n    this.canvas = document.getElementById('terrainCanvas');\n    this.drawCtx = this.canvas.getContext(\"2d\");\n    this.fill = \"black\";\n    this.stroke = 2;\n    this.clickHold = false;\n    this.prevX = 0; this.currX = 0; this.prevY = 0; this.currY = 0;\n    this.pointerOffsetX = 0;\n    this.pointerOffsetY = 0;\n    // let that = this;\n\n    //draw goal\n    this.drawGoal();\n\n    window.addEventListener(\"mousemove\", (e) => (\n        this.findxy('move', e)\n    ), false);\n    window.addEventListener(\"mousedown\", (e) => (\n        this.findxy('down', e)\n    ), false);\n    window.addEventListener(\"mouseup\", (e) => (\n        this.findxy('up', e)\n    ), false);\n    window.addEventListener(\"mouseout\", (e) => (\n        this.findxy('out', e)\n    ), false);\n  }\n\n  drawGoal() {\n    this.drawCtx.beginPath();\n    this.drawCtx.fillStyle = \"rgba(0, 255, 0, 255)\";\n    this.drawCtx.fillRect(20, 40, 20, 20);\n    this.drawCtx.closePath();\n  }\n\n  draw() {\n    this.drawCtx.beginPath();\n    this.drawCtx.moveTo(this.prevX, this.prevY);\n    this.drawCtx.lineTo(this.currX, this.currY);\n    this.drawCtx.strokeStyle = this.fill;\n    this.drawCtx.lineWidth = this.stroke;\n    this.drawCtx.stroke();\n    this.drawCtx.closePath();\n  }\n\n\n\n  findxy(res, e) {\n    if (res === 'down') {\n        this.prevX = this.currX;\n        this.prevY = this.currY;\n        this.currX = e.clientX - this.canvas.offsetLeft;\n        this.currY = e.clientY - this.canvas.offsetTop;\n\n        this.clickHold = true;\n            this.drawCtx.beginPath();\n            this.drawCtx.fillStyle = this.fill;\n            this.drawCtx.fillRect(this.currX, this.currY, 2, 2);\n            this.drawCtx.closePath();\n\n    }\n    if (res === 'up' || res === \"out\") {\n        this.clickHold = false;\n    }\n    if (res === 'move') {\n        if (this.clickHold) {\n            this.prevX = this.currX;\n            this.prevY = this.currY;\n            this.currX = e.clientX - this.canvas.offsetLeft;\n            this.currY = e.clientY - this.canvas.offsetTop;\n            this.draw();\n        }\n    }\n  }\n}\n\nexport default DrawCanvas;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./drawcanvas.js\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}